<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width = device-width, initial-scale = 1, user-scalable = yes">
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="feed.xml">
<title>MYAO's WEBSITE - Syntax and Rule of files for Tripitaka</title>
</head>
<body>
<header id="main-header">
<h1><a href="index.htm">MYAO's WEBSITE</a></h1>
</header>
<main>
<header id="article-header">
<div id="date">2017-05-04</div>
<h2 id="title">Syntax and Rule of files for Tripitaka</h2>
</header>
<div id="article-main">
<p>設定ファイル(~/.tripitakarc, project)や、記事の内容を表すファイル(.datファイル)の書き方を説明します。 </p><h3>設定ファイルや、記事の内容を表すファイルの書き方</h3><p>これらのファイルは、以下のようにコロン(:)から始まるキーワードと、そのキーワードが表す値のペアが並んだものになっています。 </p><p>projectファイルの例 </p><pre><code>:site-name SAMPLE WEBSITE  
:site-url sample://eaxample.com  
:author Your name  
:pubyear 2017 </code></pre><p>.datファイルの例 </p><pre><code>:title TITLE-OF-PAGE  
:date YYYY-MM-DD  
:up upper-page  
:prev previous-page  
:next next-page  
:text  
This is a sample text.  
 
Hello Tripitaka!  
 
You can use markdown notation.  
 
* sample list  
* foo  
* bar </code></pre><p>似た記法のものとして、Lispのplistや、CommonLisp製の<a href="https://github.com/t-sin/rosa">rosa</a>があります。 </p><p>現在(2017-05-04)は、以下の仕様となっていますが、以下のように制限や変更する可能性があります。 </p><ul><li>記事の本文を表す場合を除いて、<ul><li>一行にキーワードとその値である文字列を半角スペース区切りで書く。</li><li>改行でキーワードと値のペア達を区切る。</li></ul></li><li>キーワードの部分<ul><li>REPLに読み込ませた時にインターンされるCommonLispのキーワードシンボル</li><li>英数文字といくつかの記号のみを許すことにした方が分かりやすいかもしれない。候補は以下の通り<ul><li>大文字小文字の違いを無視したラテン・アルファベット52字(26字 * 2)</li><li>ハイフン(-), アンスコ(_), プラス(+), ピリオド(.)</li><li>まだ考えている段階</li></ul></li><li>特に何が何を表すということは無いけれども、以上の4つは固定のほうがいいかもしれない。</li></ul></li><li>値の部分<ul><li>両端の空白は取り除かれる。</li><li>その後、両端の”が取り除かれる。</li><li>正直なところ、ここの与え方をどうするのが良いか悩んでいる。<ul><li>リストを表すには?</li><li>ダブルクォーテーションを持ちたいときは?</li><li>etc...</li></ul></li></ul></li><li>複数行には対応していない。<ul><li>記事を表す記事の本文部分のみ対応している。</li><li>rosaに合わせる形での複数行の文字列に対応させようかと考えている。</li></ul></li></ul><h4>.tripitakarcファイルとprojectファイル</h4><p>これらについては、前ページでも触れたので割愛。 </p><h4>.datファイル</h4><p>Tripitakaは.datファイルの雛形を生成するtripitaka:make-datという関数を提供している。これは、以下のキーワードが含まれた.datファイルを生成する。 </p><ul><li>title<ul><li>記事のタイトルを表す。</li></ul></li><li>date<ul><li>記事の作成された、あるいは更新された日付を表す。</li><li>デフォルトでは、TripitakaはYYYY-MM-DDの形式で作成日を自動生成する。</li></ul></li><li>up<ul><li>記事の関係性を表す。記事の上層にあたる記事(ページ)の名前を書く。</li></ul></li><li>next<ul><li>記事の関係性を表す。記事の次の記事にあたる記事(ページ)の名前を書く。</li></ul></li><li>prev<ul><li>記事の関係性を表す。記事の前の記事にあたる記事(ページ)の名前を書く。</li></ul></li><li>id<ul><li>Atomフィード用のIDを表す。</li></ul></li><li>text<ul><li>本文を表す。これはファイルの一番最後に書く。(2017-05-04時点)</li><li>同じ行に書いたものは無視される。:textの次の行からファイルの最後までが記事の本文となる。</li><li>マークダウン記法で書く。</li></ul></li></ul><p>現在(2017-05-04)は、titleを除いて、これらはTripitakaで使われる項目ですが、単純にテンプレートと合わせてHTMLを作るtripitaka:make-html関数を使うのみであれば、キーワードの名称がなんであっても構いません。それはテンプレートの作り方に依存します。しかし、テンプレートを作るやり方が決まっている事が良いと思われる、また日記の自動採番やフィードの自動生成等の機能のためには必須となる項目がために、今後必須項目となる可能性が高いです。 </p><p>次のページではテンプレートの書き方を説明します。 </p>
</div>
<footer id="article-footer">
UP: <a href="tripitaka.htm">Intoroduction of Tripitaka</a>
PREV: <a href="tripitaka-2.htm">Setting of Tripitaka</a>
NEXT: <a href="tripitaka-4.htm">Syntax and Rule of template files for Tripitaka</a>
</footer>
</main>
<footer id="main-footer">
<div id="icons"><a href="feed.xml"><img src="img/feed.png" alt="feed.xml" class="icon-img"></a>
<a href="https://twitter.com/myao_s_moking"><img src="img/twit.png" alt="https://twitter.com/myao_s_moking" class="icon-img"></a>
<a href="https://github.com/myaosato"><img src="img/github.png" alt="https://twitter.com/myaosato" class="icon-img"></a>
</div>
<div id="copyright">&copy; 2010 Satoaki Miyao</div>
</footer>
</body>
</html>