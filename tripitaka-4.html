<!doctype html><html lang="ja"><head><meta charset="UTF-8" /><meta name="viewport" content="width = device-width, initial-scale = 1, user-scalable = yes" /><link rel="stylesheet" type="text/css" href="css/style.css" /><title>無門関 - Syntax and Rule of template files for Tripitaka</title></head><body><header id="main-header"><h1><a href="./index.html">無門関</a></h1></header><main><header id="article-header"><div id="date">2017-05-04</div><h2 id="title">Syntax and Rule of template files for Tripitaka</h2></header><div id="article-main"><p>HTMLファイルを作るためのテンプレートのファイルの書き方を説明します。 </p><h3>テンプレートファイル</h3><p>記事の内容については、<a href="tripitaka-3.htm">前のページ</a>で説明したファイルを使います。デザインやHTMLのマークアップの側はHTMLによく似たファイルを使います。 </p><pre><code>&lt;!doctype html&gt;  
&lt;html lang="ja"&gt;  
&lt;head&gt;  
&lt;meta charset="UTF-8"&gt;  
&lt;meta name="viewport" content="width = device-width, initial-scale = 1, user-scalable = yes"&gt;  
&lt;link rel="stylesheet" type="text/css" href="style.css"&gt;  
&lt;link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="feed.xml"&gt;  
&lt;title&gt;&lt;tri:project prop="site-name"&gt; - &lt;tri:page prop="title"&gt;&lt;/title&gt;  
&lt;/head&gt;  
&lt;body&gt;  
&lt;header id="main-header"&gt;  
&lt;h1&gt;&lt;a href="index.htm"&gt;&lt;tri:project prop="site-name"&gt;&lt;/a&gt;&lt;/h1&gt;  
&lt;/header&gt;  
&lt;main&gt;  
&lt;header id="article-header"&gt;  
&lt;div id="date"&gt;&lt;tri:page prop="date"&gt;&lt;/div&gt;  
&lt;h2 id="title"&gt;&lt;tri:page prop="title"&gt;&lt;/h2&gt;  
&lt;/header&gt;  
&lt;div id="article-main"&gt;  
&lt;tri:page prop="text"&gt;  
&lt;/div&gt;  
&lt;footer id="article-footer"&gt;  
UP: &lt;a href="&lt;tri:page prop="up"&gt;.htm"&gt;&lt;tri:page prop="title" name="&lt;tri:page prop="up"&gt;"&gt;&lt;/a&gt;  
PREV: &lt;a href="&lt;tri:page prop="prev"&gt;.htm"&gt;&lt;tri:page prop="title" name="&lt;tri:page prop="prev"&gt;"&gt;&lt;/a&gt;  
NEXT: &lt;a href="&lt;tri:page prop="next"&gt;.htm"&gt;&lt;tri:page prop="title" name="&lt;tri:page prop="next"&gt;"&gt;&lt;/a&gt;  
&lt;/footer&gt;  
&lt;/main&gt;  
&lt;footer id="main-footer"&gt;  
&lt;div id="icons"&gt;&lt;a href="feed.xml"&gt;&lt;img src="img/feed.png" alt="feed.xml" class="icon-img"&gt;&lt;/a&gt;  
&lt;a href="https://twitter.com/&lt;tri:project prop="twit"&gt;"&gt;&lt;img src="img/twit.png" alt="https://twitter.com/&lt;tri:project prop="twit"&gt;" class="icon-img"&gt;&lt;/a&gt;  
&lt;a href="https://github.com/&lt;tri:project prop="github"&gt;"&gt;&lt;img src="img/github.png" alt="https://twitter.com/&lt;tri:project prop="github"&gt;" class="icon-img"&gt;&lt;/a&gt;  
&lt;/div&gt;  
&lt;div id="copyright"&gt;&copy; &lt;tri:project prop="pubyear"&gt; &lt;tri:project prop="author"&gt;&lt;/div&gt;  
&lt;/footer&gt;  
&lt;/body&gt;  
&lt;/html&gt; </code></pre><p>上の例は、このページを作っているテンプレートのファイルです。ほぼHTMLファイルですが、ところどころに次のようなタグがあることが解ると思います。 </p><pre><code>&lt;tri:page prop="title"&gt;  
&lt;tri:project prop="site-name"&gt;  
&lt;tri:page prop="title" name="&lt;tri:page prop="up"&gt;"&gt; </code></pre><p>これらのタグはプレースホルダになっていて、Tripitakaのtripitaka:make-html関数は、これらを対応する設定ファイルや.datファイルに書かれた値と置き換えます。 </p><h3>記事に関する情報</h3><pre><code>&lt;tri:page prop="title"&gt;  
&lt;tri:page prop="title" name="index"&gt; </code></pre><p>tri:pageで始まるこれらのタグは、ページに関する情報を表す。prop属性で指定したキーワードに対応する値と置き換えられる。name属性を指定しない場合には、HTML化する記事の、name属性を指定するとdatディレクトリ内の該当記事のデータで置き換えられる。このタグは、 </p><pre><code>&lt;tri:page prop="title" name="&lt;tri:page prop="up"&gt;"&gt; </code></pre><p>のように、入れ子にすることも出来る。上の例では、まず今HTML化しようとしている記事の:upの値を参照し、それを元にその値の指し示すファイルの:titleの値を参照して置き換える。 </p><h3>プロジェクトに関する情報</h3><p>ウェブサイトの名前や、コンテキストルートのURLと言った情報を記事の情報それぞれに与えるのは変な話で、それらをまとめておくファイルがprojectであった。 </p><pre><code>&lt;tri:project prop="site-name"&gt; </code></pre><p>tri:projectから始まるタグはprojectファイルを読みに行く。記事の情報と同じ様にprop属性にキーワードを指定する。こちらにはname属性は無い。上の例には、これまでのページに出てこなかった </p><pre><code>&lt;tri:project prop="twit"&gt; </code></pre><p>のようにtwit等のキーワードが存在する。現在(2017-05-04)は、このようにテンプレートに依存するキーワードの存在を許した状態であるがテンプレート作成の為のガイドライン作成を今後進めていく中で、この点は変更される可能性は高い。 </p></div><footer id="article-header">UP: <a href="tripitaka.html">tripitaka</a> PREV: <a href="tripitaka-3.html">tripitaka-3</a> NEXT: <a href="tripitaka-5.html">tripitaka-5</a></footer></main><footer id="main-footer"><div id="icnos"><a href="https://twitter.com/myao_s_moking"><img src="img/twit.png" class="icon-img" /></a><a href="https://github.com/myaosato"><img src="img/github.png" class="icon-img" /></a></div><div id="copyright">&copy;2010 Satoaki Miyao</div></footer></body></html>